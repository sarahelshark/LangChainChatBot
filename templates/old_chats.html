  <div class="offcanvas offcanvas-end" tabindex="-1" id="oldChatsOffcanvas" aria-labelledby="oldChatsOffcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="oldChatsOffcanvasLabel">Vecchie Conversazioni</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <select id="oldChatModelSelect" class="form-select mb-3">
        <option value="chatgpt">ChatGPT</option>
        <option value="gemini">Gemini</option>
      </select>
      <div id="oldChatsContent">
        <!-- Le vecchie conversazioni saranno caricate qui -->
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const oldChatsOffcanvas = document.getElementById('oldChatsOffcanvas');
      const oldChatModelSelect = document.getElementById('oldChatModelSelect');
    
      function loadOldChats(modelType) {
        fetch(`/api/get_old_chats?model=${modelType}`)
          .then(response => response.json())
          .then(data => {
            const oldChatsContent = document.getElementById('oldChatsContent');
            oldChatsContent.innerHTML = '';
            data.conversations.forEach(conversation => {
              const conversationElement = document.createElement('div');
              conversationElement.className = 'card mb-3';
              conversationElement.innerHTML = `
                <div class="card-body">
                  <p class="card-text">${conversation}</p>
                </div>
              `;
              oldChatsContent.appendChild(conversationElement);
            });
          })
          .catch(error => console.error('Errore nel recupero delle vecchie conversazioni:', error));
      }
    
      oldChatModelSelect.addEventListener('change', function() {
        loadOldChats(this.value);
      });
    
      oldChatsOffcanvas.addEventListener('show.bs.offcanvas', function () {
        loadOldChats(oldChatModelSelect.value);
      });
    });
    </script>
 